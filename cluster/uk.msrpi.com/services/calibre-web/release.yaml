---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: calibre-web
  namespace: miscellaneous
spec:
  interval: 5m
  releaseName: calibre-web-core
  chart:
    spec:
      # renovate: registryUrl=https://k8s-at-home.com/charts
      chart: calibre-web
      version: 7.2.0
      sourceRef:
        kind: HelmRepository
        name: k8s-at-home
        namespace: flux-system
      interval: 1m
  # dependsOn:
  # - name: sealed-secrets
  #   namespace: kube-system
  # - name: traefik
  #   namespace: kube-system
  # - name: longhorn
  #   namespace: longhorn-system
  values:
    env:
      TZ: Europe/London
      PUID: 1031
      PGID: 100
    persistence:
      config:
        enabled: true
        existingClaim: calibre-web-config-pvc
      books:
        enabled: true
        existingClaim: calibre-web-books-pvc
    resources:
      limits:
        memory: 2500Mi
      requests:
        cpu: 250m
        memory: 512Mi
    initContainers:
      - name: calibre-init
        image: "alpine:3.14"
        env:
          - name: TZ
            value: "Europe/London"
          - name: PUID
            value: "1031"
          - name: PGID
            value: "100"
        volumeMounts:
          - name: books
            mountPath: "/books"
        command: ["sh", "-c"]
        args:
          - |
            FILE=/books/metadata.db

            if test -f "$FILE"; then
                echo "$FILE already exists, skipping generation."
            else
                echo "$FILE does not exists, generating..."
                echo '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' | base64 -d | gzip -d - > $FILE
                echo "$FILE created, setting permissions..."
                chmod a+w $FILE
                # this is needed for uploads, you can remove it if you don't want to allow uploads
                chown -R $PUID:$PGID /books
                echo "Permissions fixed, use /books as library path"
            fi
